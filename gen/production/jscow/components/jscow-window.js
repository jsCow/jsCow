jsCow.res.components.window=function(){},jsCow.res.components.window.prototype={init:function(){return this.addController(jsCow.res.controller.window),this.addModel(jsCow.res.model.window),this.addView(jsCow.res.view.window),this},title:function(title){return this.trigger("title",{title:title}),this},cloasable:function(c){return"undefined"==typeof c&&(cloasable=!0),this.trigger("cloasable",{cloasable:cloasable}),this},maximizable:function(max){var maximizable;return"undefined"==typeof max&&(maximizable=!0),this.trigger("maximizable",{maximizable:maximizable}),this},minimizable:function(min){var minimizable;return"undefined"==typeof min&&(minimizable=!0),this.trigger("minimizable",{minimizable:minimizable}),this}},jsCow.res.model.window=function(){this.data={enabled:!0,visible:!0,title:"",top:100,left:300,width:0,height:0,cloasable:!1,maximizable:!1,minimizable:!1,zindex:0}},jsCow.res.model.window.prototype={init:function(e){this.trigger("model.ready",this.data)}},jsCow.res.view.window=function(){this.dom={},this.dom.main=$("<div/>").addClass("jsc-window"),this.dragstart=!1,this.mousePosX=0,this.mousePosY=0,this.winPosX=0,this.winPosY=0,this.newWinPosX=0,this.newWinPosY=0,this.dom.titleContainer=$("<div/>").addClass("jsc-window-title").appendTo(this.dom.main),this.dom.icon=$("<div/>").addClass("jsc-window-title-ico").appendTo(this.dom.titleContainer),this.dom.title=$("<div/>").addClass("jsc-window-title-text").appendTo(this.dom.titleContainer),this.dom.content=$("<div/>").addClass("jsc-window-content").appendTo(this.dom.main),this.close=!1,this.maximize=!1,this.minimize=!1},jsCow.res.view.window.prototype={init:function(e){this.dom.main.on("mousedown",function(self,e){return function(){var offsetLeft=self.dom.main.offset().left,offsetTop=self.dom.main.offset().top;self.mousePosX=document.all?window.event.clientX:event.pageX,self.mousePosY=document.all?window.event.clientY:event.pageY,self.winPosX=self.mousePosX-offsetLeft,self.winPosY=self.mousePosY-offsetTop,self.dragstart=!0}}(this,e)).on("mouseup",function(self,e){return function(){self.dragstart=!1,self.trigger("model.update",{top:self.newWinPosY,left:self.newWinPosX})}}(this,e)),$(document).on("mousemove",function(self,e){return function(event){self.dragstart&&(self.mousePosX=document.all?window.event.clientX:event.pageX,self.mousePosY=document.all?window.event.clientY:event.pageY,self.newWinPosX=self.mousePosX-self.winPosX,self.newWinPosY=self.mousePosY-self.winPosY,self.dom.main.css("left",self.newWinPosX),self.dom.main.css("top",self.newWinPosY))}}(this,e))},update:function(e){e.data.enabled?(this.dom.main.removeClass("jsc-window-disabled").addClass("jsc-window"),e.data.closable?this.close||(this.close=jsCow.get(jsCow.res.components.button,{icon:{name:"times",direction:"l"}}),this.close.target(this.dom.titleContainer),this.close.on("click",function(self){return function(e){self.trigger("close")}}(this)),this.close.run()):this.close&&this.close.hide(),e.data.title&&this.dom.title.html(e.data.title),e.data.width&&this.dom.main.width(e.data.width),e.data.height&&this.dom.content.height(e.data.height),e.data.top&&this.dom.main.css({top:e.data.top}),e.data.left&&this.dom.main.css({left:e.data.left}),e.data.zindex&&this.dom.main.css({zindex:e.data.zindex}),e.data.visible?this.dom.main.show():this.dom.main.hide()):this.dom.main.removeClass("jsc-window").addClass("jsc-window-disabled")}},jsCow.res.controller.window=function(){},jsCow.res.controller.window.prototype={init:function(e){this.on("model.ready",this.isModelReady),this.on("title",this.title),this.on("cloasable",this.cloasable),this.on("maximizable",this.maximizable),this.on("minimizable",this.minimizable),this.on("close",this.close)},isModelReady:function(e){this.trigger("view.init",this.cmp().config())},title:function(e){this.cmp().config({title:e.data.title})},cloasable:function(e){this.cmp().config({cloasable:e.data.cloasable})},maximizable:function(e){this.cmp().config({maximizable:e.data.maximizable})},minimizable:function(e){this.cmp().config({minimizable:e.data.minimizable})},close:function(e){this.cmp().del()}};